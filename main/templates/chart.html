 <!DOCTYPE html>
<html>
{% load static %}
    <head>
    	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>

	<style>
		.chart{height:20em;width:20em;}

	</style>
    </head>
<body>
<div class="row text-center">
	<div class="col-sm-4"></div>
	<div class="col-sm-4">
		<div class="chart">
				<canvas id="myChart" width="100" height="100"></canvas>
		</div>
	</div>
	<div class="col-sm-4"></div>
</div>
<script>
var endpoint = '/api/chart/data/'
var defaultdata = []
var labels = []
$.ajax({
	method: "GET",
	url: endpoint,
	success: function(data){
		labels = data.labels
		defaultdata = data.default
		setchart()
	},
	error: function(error_data){
		console.log("error")
		console.log(error_data)
	}
});

function setchart(){
		var ctx = document.getElementById('myChart').getContext('2d');
		var myChart = new Chart(ctx, {
		    type: 'polarArea',
		    data: {
		        labels: labels,
		        datasets: [{
		            label: '# of Votes',
		            data: defaultdata,
		            backgroundColor: [
		            	'rgb(23, 129, 208, 0.4)',
		            	'rgb(29, 128, 76, 0.5)',
		                'rgb(208, 23, 23,0.4)',
		            ],
		            borderColor: [
		            	'rgb(23, 129, 208, 1)',
		            	'rgb(29, 128, 76, 1)',
		            	'rgb(208, 23, 23,1)',
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
}
</script>
</body>
</html>


